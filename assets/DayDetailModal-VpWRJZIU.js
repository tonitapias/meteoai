import{j as e,T as j,H as S}from"./index-DHlSO-8t.js";import{r as c,X as z,H as C,D as L,W,v as $,S as v,M as E,z as H}from"./vendor-react-BZ5tFjZ7.js";function I({weatherData:t,selectedDayIndex:p,onClose:y,unit:N,lang:m,shiftedNow:_,getWeatherIcon:P}){const i=j[m]||j.ca;if(p===null||!t)return null;const r=c.useMemo(()=>{const s=p;return{date:t.daily.time[s],maxTemp:t.daily.temperature_2m_max[s],minTemp:t.daily.temperature_2m_min[s],weatherCode:t.daily.weather_code[s],precipSum:t.daily.precipitation_sum[s],precipProb:t.daily.precipitation_probability_max[s],windMax:t.daily.wind_speed_10m_max[s],sunrise:t.daily.sunrise[s],sunset:t.daily.sunset[s],uvMax:t.daily.uv_index_max[s]}},[t,p]),a=c.useMemo(()=>{if(!r.date)return[];const s=r.date.includes("T")?r.date.split("T")[0]:r.date;return t.hourly.time.map((l,o)=>({datePart:l.includes("T")?l.split("T")[0]:l,idx:o})).filter(l=>l.datePart===s).map(l=>l.idx)},[t,r]),x=c.useMemo(()=>a.length===0?[]:a.map(s=>{var n,d,u,f,b,g;let l=t.hourly.freezing_level_height?t.hourly.freezing_level_height[s]:null;l==null&&(l=((u=(d=(n=t.hourlyComparison)==null?void 0:n.gfs)==null?void 0:d[s])==null?void 0:u.freezing_level_height)??((g=(b=(f=t.hourlyComparison)==null?void 0:f.icon)==null?void 0:b[s])==null?void 0:g.freezing_level_height));const o=l!=null?Math.max(0,l-300):null;return{time:t.hourly.time[s],temp:t.hourly.temperature_2m[s],rain:t.hourly.precipitation_probability[s],snowLevel:o,isDay:t.hourly.is_day[s],code:t.hourly.weather_code[s],precip:t.hourly.precipitation[s],wind:t.hourly.wind_speed_10m[s],humidity:t.hourly.relative_humidity_2m[s]}}),[t,a]),M=c.useMemo(()=>{if(!t.hourlyComparison||a.length===0)return null;const s=l=>!l||!l.length?[]:a.map(o=>{const n=l[o];if(!n)return null;const d=n.freezing_level_height,u=d!=null?Math.max(0,d-300):null;return{time:t.hourly.time[o],temp:n.temperature_2m,rain:n.precipitation_probability,wind:n.wind_speed_10m,cloud:n.cloud_cover,humidity:n.relative_humidity_2m,snowLevel:u}}).filter(Boolean);return{gfs:s(t.hourlyComparison.gfs),icon:s(t.hourlyComparison.icon)}},[t,a]),w=c.useMemo(()=>{if(x.length===0)return"---";const s=x.map(n=>n.snowLevel).filter(n=>n!=null);if(s.length===0)return"---";const l=Math.min(...s),o=Math.max(...s);return Math.abs(o-l)<50?`${Math.round(l)}m`:l>4500?"> 4500m":`${Math.round(l)} - ${Math.round(o)}m`},[x]),T=s=>new Date(s).toLocaleDateString(m==="ca"?"ca-ES":m==="es"?"es-ES":"en-US",{weekday:"long",day:"numeric",month:"long"}),h=s=>new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),k=s=>s>10?`(${i.uvExtreme})`:s>7?`(${i.uvVeryHigh})`:s>5?`(${i.uvHigh})`:s>2?`(${i.uvMod})`:`(${i.uvLow})`;return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-950/80 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-slate-900 border border-white/10 w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-3xl shadow-2xl relative animate-in zoom-in-95 duration-300 custom-scrollbar",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:y,"aria-label":i.removeFavorite||"Tancar",className:"absolute top-4 right-4 p-2 bg-white/5 hover:bg-white/10 rounded-full transition-colors z-10",children:e.jsx(z,{className:"w-6 h-6 text-slate-400 hover:text-white"})}),e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 md:items-center justify-between mb-8 border-b border-white/5 pb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white capitalize mb-2",children:T(r.date)}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[e.jsx(C,{className:"w-4 h-4",strokeWidth:2.5}),e.jsx("span",{className:"text-sm font-medium",children:i.dayDetailTitle})]})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-white/5 px-5 py-3 rounded-2xl",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-xs text-rose-300 font-bold uppercase tracking-wider",children:i.max}),e.jsxs("span",{className:"text-2xl font-bold text-white",children:[Math.round(r.maxTemp),"°"]})]}),e.jsx("div",{className:"w-px h-8 bg-white/10"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-xs text-cyan-300 font-bold uppercase tracking-wider",children:i.min}),e.jsxs("span",{className:"text-2xl font-bold text-white",children:[Math.round(r.minTemp),"°"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-2xl flex flex-col items-center justify-center text-center gap-2",children:[e.jsx(L,{className:"w-6 h-6 text-blue-400 mb-1",strokeWidth:2.5}),e.jsx("span",{className:"text-xs text-slate-400 uppercase font-bold",children:i.totalPrecipitation}),e.jsxs("span",{className:"text-lg font-bold text-slate-200",children:[r.precipSum," mm"]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-2xl flex flex-col items-center justify-center text-center gap-2",children:[e.jsx(W,{className:"w-6 h-6 text-teal-400 mb-1",strokeWidth:2.5}),e.jsx("span",{className:"text-xs text-slate-400 uppercase font-bold",children:i.windMax}),e.jsxs("span",{className:"text-lg font-bold text-slate-200",children:[r.windMax," km/h"]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-2xl flex flex-col items-center justify-center text-center gap-2",children:[e.jsx($,{className:"w-6 h-6 text-indigo-300 mb-1",strokeWidth:2.5}),e.jsx("span",{className:"text-xs text-slate-400 uppercase font-bold",children:i.snowLevel}),e.jsx("span",{className:"text-lg font-bold text-slate-200",children:w})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-2xl flex flex-col items-center justify-center text-center gap-2",children:[e.jsx(v,{className:"w-6 h-6 text-amber-400 mb-1",strokeWidth:2.5}),e.jsx("span",{className:"text-xs text-slate-400 uppercase font-bold",children:i.uvIndex}),e.jsxs("span",{className:"text-lg font-bold text-slate-200",children:[r.uvMax,e.jsx("span",{className:"text-xs ml-1 font-normal opacity-70",children:k(r.uvMax)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-amber-500/10 to-orange-500/10 border border-amber-500/20 p-4 rounded-2xl flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-500/20 rounded-full text-amber-400",children:e.jsx(v,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-amber-200/70 font-bold uppercase",children:i.sunrise}),e.jsx("span",{className:"text-xl font-bold text-amber-100",children:h(r.sunrise)})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-indigo-500/10 to-purple-500/10 border border-indigo-500/20 p-4 rounded-2xl flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-full text-indigo-400",children:e.jsx(E,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-indigo-200/70 font-bold uppercase",children:i.sunset}),e.jsx("span",{className:"text-xl font-bold text-indigo-100",children:h(r.sunset)})]})]})})]}),e.jsxs("div",{className:"bg-slate-950/50 border border-white/5 rounded-3xl p-4 md:p-6",children:[e.jsxs("h3",{className:"font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5 text-indigo-400",strokeWidth:2.5})," ",i.hourlyEvolution]}),e.jsx(S,{data:x,comparisonData:M,unit:N,lang:m,shiftedNow:_})]})]})]})})}export{I as default};
